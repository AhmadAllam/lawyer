<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أطراف الدعوى - محامين مصر الرقمية</title>
    
    <!-- Tailwind CSS Local -->
    <link rel="stylesheet" href="css/tailwind.min.css">
    
    <!-- Remix Icons Local -->
    <link rel="stylesheet" href="css/remixicon.css">
    
    <!-- Link to the main stylesheet -->
    <link rel="stylesheet" href="css/style.css">
    
    <style>
        /* Remove all animations and transitions for low-power devices */
        *, *::before, *::after {
            animation-duration: 0s !important;
            animation-delay: 0s !important;
            transition-duration: 0s !important;
            transition-delay: 0s !important;
        }
        
        /* Light Theme inspired by search page */
        html, body {
            background: linear-gradient(135deg, #334155, #111827, #1e3a8a) !important;
            min-height: 100vh !important;
            color: #0f172a !important; /* slate-900 */
        }
        
        body.min-h-screen {
            background: transparent !important;
        }
        
        /* Override any Tailwind background classes */
        .min-h-screen {
            background: transparent !important;
        }

        /* Light-friendly styling for case details inside new.html */
        #embedded-content .bg-gradient-to-br,
        #modal #modal-content .bg-gradient-to-br {
            /* Tailwind blue-50 */
            background-color: #eff6ff !important;
            background-image: none !important;
            /* Tailwind blue-300 */
            border-color: #93c5fd !important;
        }
        /* Inner boxes */
        #case-details-form .bg-white, 
        #case-details-form .bg-white\/90,
        #case-details-form .bg-white\/95 {
            /* Tailwind blue-50 */
            background-color: #eff6ff !important;
        }
        /* Inputs, selects, textareas */
        #case-details-form input,
        #case-details-form select,
        #case-details-form textarea {
            background-color: #ffffff !important;
            border: 2px solid #93c5fd !important;
            color: #0f172a !important; /* slate-900 */
        }
        #case-details-form label { color: #0f172a !important; }
        #case-details-form .text-gray-700 { color: #0f172a !important; }
        /* Borders in the form */
        #case-details-form .border-blue-200,
        #case-details-form .border-blue-300 { border-color: #93c5fd !important; }
        /* Accent icons */
        #case-details-form .text-blue-600 { color: #2563eb !important; }
        /* Error text keeps red */
        #case-details-form #case-number-error { color: #ef4444 !important; }

        /* Reduce excessive borders when embedded */
        #embedded-content > div.border { border: 0 !important; box-shadow: none !important; }
        #case-details-form .border { border-color: rgba(59,130,246,0.25) !important; }

        /* Simplify and unify buttons styling inside case form */
        #case-details-form button[type="submit"],
        #next-to-case-details-btn,
        #save-case-btn {
            background: #2563eb !important; /* blue-600 */
            border: 1px solid #1d4ed8 !important; /* blue-700 */
            color: #fff !important;
            box-shadow: none !important;
            transform: none !important;
            border-radius: 0.5rem !important;
            padding: 0.5rem 1rem !important;
            min-height: 40px !important;
            min-width: 40px !important;
            font-size: 14px !important;
            letter-spacing: .2px;
        }
        #party-details-actions > div:first-child { max-width: 200px; width: 100%; }
        #case-details-form button[type="submit"]:hover,
        #next-to-case-details-btn:hover,
        #save-case-btn:hover {
            background: #1d4ed8 !important; /* blue-700 */
            border-color: #1e40af !important; /* blue-800 */
        }

        /* Unify session save button */
        #session-form button[type="submit"] {
            background: #2563eb !important; /* blue-600 */
            border: 1px solid #1d4ed8 !important; /* blue-700 */
            color: #fff !important;
            box-shadow: none !important;
            transform: none !important;
            border-radius: 0.5rem !important;
            padding: 0.5rem 1rem !important;
            min-height: 40px !important;
            min-width: 140px !important;
            font-size: 14px !important;
            letter-spacing: .2px;
        }
        #session-form button[type="submit"]:hover {
            background: #1d4ed8 !important; /* blue-700 */
            border-color: #1e40af !important; /* blue-800 */
        }

        /* Manage sessions button as secondary style */
        #manage-sessions-btn {
            background: #1d4ed8 !important; /* blue-700 */
            border: 1px solid #1e40af !important; /* blue-800 */
            color: #ffffff !important;
            box-shadow: none !important;
            transform: none !important;
            border-radius: 0.5rem !important;
            padding: 0.75rem 1.25rem !important;
            min-height: 56px !important;
            min-width: 200px !important;
            font-size: 16px !important;
            gap: 0.5rem !important;
        }
        #manage-sessions-btn:hover {
            background: #1e40af !important; /* blue-800 */
            border-color: #1e3a8a !important; /* blue-900 */
        }
        #manage-sessions-btn > div.w-12 { display: none !important; }
        #manage-sessions-btn i { color: #ffffff !important; }
        #manage-sessions-btn .text-purple-100 { color: #ffffff !important; }

        /* Enlarge save session button */
        #session-form button[type="submit"] {
            padding: 0.75rem 1.25rem !important;
            min-height: 56px !important;
            min-width: 200px !important;
            font-size: 16px !important;
            gap: 0.5rem !important;
            border-radius: 0.5rem !important;
            background: #2563eb !important; /* blue-600 */
            border: 1px solid #1d4ed8 !important; /* blue-700 */
            color: #fff !important;
        }

        #party-details-actions > .text-xs { display: none !important; }

        /* Autocomplete dropdown - light theme */
        .autocomplete-container { position: relative; }
        .autocomplete-results {
            background-color: #ffffff !important;
            color: #0f172a !important;
            border: 1px solid rgba(59,130,246,0.25) !important;
            border-radius: 0.5rem !important;
            position: absolute !important;
            width: 100% !important;
            right: 0; left: 0;
            margin-top: 0.25rem;
            max-height: 16rem;
            overflow-y: auto;
            z-index: 60;
            box-shadow: 0 8px 24px rgba(2,6,23,0.1);
        }
        .autocomplete-item {
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            color: #0f172a !important;
        }
        .autocomplete-item:hover { background-color: #f3f4f6 !important; }
        .autocomplete-item + .autocomplete-item { border-top: 1px solid #e5e7eb !important; }

        /* Session modal: light labels */
        #modal #modal-content label,
        #modal #modal-content .text-gray-700,
        #modal #modal-content .text-gray-800,
        #modal #modal-content .text-gray-600,
        #modal #modal-content h1,
        #modal #modal-content h2,
        #modal #modal-content h3 {
            color: #0f172a !important;
        }

        /* Ensure inner boxes use light bg in modal */
        #modal #modal-content .bg-white,
        #modal #modal-content .bg-white\/90,
        #modal #modal-content .bg-white\/95 {
            background-color: #ffffff !important;
        }

        #modal #modal-content input,
        #modal #modal-content select,
        #modal #modal-content textarea {
            background-color: #ffffff !important;
            border: 2px solid #93c5fd !important;
            color: #0f172a !important;
        }

        /* Embedded content inputs */
        #embedded-content label,
        #embedded-content .text-gray-700,
        #embedded-content .text-gray-800,
        #embedded-content .text-gray-600,
        #embedded-content h1,
        #embedded-content h2,
        #embedded-content h3 {
            color: #0f172a !important;
        }
        #embedded-content .bg-white,
        #embedded-content .bg-white\/90,
        #embedded-content .bg-white\/95 { 
            background-color: #ffffff !important;
        }
        #embedded-content input,
        #embedded-content select,
        #embedded-content textarea {
            background-color: #ffffff !important;
            border: 2px solid #93c5fd !important;
            color: #0f172a !important;
        }

        /* Reduce top gap between page title and first row in case-details view */
        #embedded-content { margin-top: 0 !important; }
        #embedded-content > .bg-gradient-to-br { padding-top: 0.375rem !important; }
        
        /* Ensure full height coverage */
        html, body {
            height: 100vh !important;
            overflow-x: hidden;
        }
        
        #party-form-container {
            min-height: calc(100vh - 48px) !important;
            height: auto !important;
        }
        
        /* Make form stretch to full height */
        #party-details-form {
            min-height: calc(100vh - 80px) !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        /* Ensure the main content areas expand */
        .flex-row.items-center.gap-6 {
            flex: 1 !important;
            align-items: stretch !important;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-slate-100">
    
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-40 px-2 py-1 bg-blue-900 border-b border-blue-900">
        <div class="grid grid-cols-3 items-center">
            <!-- Back Button (right column) -->
            <div class="justify-self-start">
                <button id="back-to-main" class="inline-flex items-center gap-1 px-2 py-1 bg-transparent border border-white/20 rounded-full shadow-sm text-white hover:bg-white/10 text-sm">
                    <i class="ri-arrow-right-line text-white text-base"></i>
                    <span class="text-white">الرئيسيه</span>
                </button>
            </div>
            
            <!-- Title (center column, click to copy) -->
            <div class="justify-self-center">
                <button id="copyable-title" class="inline-flex items-center gap-1 px-3 py-1 bg-transparent border border-white/20 rounded-full shadow-sm text-white hover:bg-white/10 text-sm font-semibold" title="اضغط للنسخ">
                    <i class="ri-user-3-line text-white text-base"></i>
                    <span class="text-sm font-semibold text-white" id="page-title">إدخال بيانات الأطراف</span>
                </button>
            </div>
            
            <!-- Spacer (left column) -->
            <div class="justify-self-end"></div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 p-0 mt-10 min-h-[calc(100vh-40px)]">
        <div class="w-full h-full min-h-[calc(100vh-40px)]">
            <div class="border-0 bg-white h-full min-h-[calc(100vh-40px)]">
                <!-- Party Details Form will be inserted here -->
                <div id="party-form-container" class="p-4 bg-blue-50 border-2 border-blue-300 rounded-xl shadow-md min-h-[calc(100vh-48px)]">
                    <!-- Form content will be loaded by JavaScript -->
                </div>
                <div id="embedded-content" class="mt-0"></div>
            </div>
        </div>
    </main>
    
    <!-- Modal for case details -->
    <div id="modal" class="fixed inset-0 bg-black/60 hidden z-50 overflow-y-auto">
        <div class="flex items-start justify-center min-h-screen py-3 px-3">
            <div id="modal-container" class="bg-white/95 rounded-lg max-w-5xl w-[96vw] my-6 border border-blue-200 shadow-xl backdrop-blur-md">
                <div class="flex justify-between items-center mb-2 px-4 py-3 border-b border-blue-200/60">
                    <button id="modal-close-button" class="text-gray-600 hover:text-gray-800">
                        <i class="ri-close-line text-xl"></i>
                    </button>
                    <h2 id="modal-title" class="text-lg font-semibold text-gray-900"></h2>
                </div>
                <div id="modal-content" class="px-4 pb-4 text-gray-900"></div>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Load required JavaScript files -->
    <script src="js/state.js"></script>
    <script src="js/db.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/autocomplete.js"></script>
    <script src="js/modal.js"></script>
    <script src="js/header.js"></script>
    <script src="js/sessions.js"></script>
    <script src="js/new-page.js"></script>
</body>
</html>